import{j as i}from"./jsx-runtime.D_zvdyIk.js";import{p as d,a as x}from"./scrollInfo.DQdeN1D5.js";import{c as m}from"./clsx.B-dksMZM.js";import{r as l}from"./index.DMVOjPfi.js";import{u as h}from"./react.C0cQyWm1.js";const f=80,g="min(380px, calc(100vh - 250px))";function T(){const[c,o]=l.useState(""),t=h(d);return l.useEffect(()=>{const e=document.querySelector("#markdown-wrapper");if(!e)return;const r=Array.from(e.querySelectorAll("h1, h2, h3, h4, h5, h6"));for(let n=0;n<r.length;n++){const s=r[n],u=r[n+1],a=s.getBoundingClientRect().top,p=u?.getBoundingClientRect().top??1/0;if(a<=f&&p>f){l.startTransition(()=>{o(s.id)});break}}},[t]),c}function y(c,o){const t=h(x);l.useEffect(()=>{if(!c||!o.current)return;const e=o.current.parentElement;if(!e)return;const{clientHeight:r}=e,{clientHeight:n,offsetTop:s}=o.current,{scrollTop:u}=e,a=s-u,p=a+n;(a<0||p>r)&&(e.scrollTop=t==="up"?s-r+n:s)},[c,t])}function v({slug:c,text:o,depth:t,isActive:e}){const r=l.useRef(null);y(e,r);const n=4*(7-t);return i.jsxs("li",{className:"relative",ref:r,children:[i.jsx("span",{className:m("absolute left-0 top-2 h-1 rounded-full transition-colors",e?"bg-accent":"bg-zinc-300 dark:bg-zinc-700"),style:{width:`${n}px`},"aria-hidden":"true"}),i.jsx("a",{className:m("inline-block pl-8 transition-opacity duration-300",e?"opacity-100":"opacity-0 group-hover:opacity-100 text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100"),href:`#${c}`,children:o})]})}function I({headings:c}){const o=T();return i.jsx("nav",{"aria-label":"Table of contents",children:i.jsx("ul",{className:"relative overflow-y-auto space-y-2 group text-sm",style:{maxHeight:g,scrollbarWidth:"none"},children:c.map(t=>i.jsx(v,{slug:t.slug,text:t.text,depth:t.depth,isActive:t.slug===o},t.slug))})})}export{I as PostToc};
